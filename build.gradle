apply plugin: 'java'

buildscript {
    repositories {
        mavenLocal()
        mavenCentral()
    }

    dependencies {
        compile 'mysql:mysql-connector-java:8.0.13'
        compile 'commons-cli:commons-cli:1.4'
        classpath group: 'com.bmuschko', name: 'gradle-docker-plugin', version: '4.0.5'
    }
}

version '0.1'

// Docker tasks â€”-------------------------
apply plugin: 'com.bmuschko.docker-remote-api'
apply plugin: 'com.bmuschko.docker-java-application'

import com.bmuschko.gradle.docker.tasks.image.*
import com.bmuschko.gradle.docker.tasks.container.*

task buildImage(type: DockerBuildImage, dependsOn: build) {
    inputDir = rootProject.projectDir
    dockerFile = project.file("docker${File.separator}Dockerfile")
    imageId = "mandarinka/benchmark"
    tags = ["mandarinka/benchmark:0.1", "mandarinka/benchmark:latest"]
}

task pushImage(type: DockerPushImage, dependsOn: buildImage) {
    imageName = "mandarinka/benchmark"
    tag = "mandarinka/benchmark:0.1"
}